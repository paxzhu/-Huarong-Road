{"ast":null,"code":"var _jsxFileName = \"/home/zpc/Code/MyProjects/Maze/src/App.js\",\n  _s = $RefreshSig$();\n// function reshape(array, m, n) {\n\n// }\n\n// function create_dest(m, n) {\n//   let dest = Array(m*n).fill(null).map((_, i) => i+1);\n//   dest = reshape(dest, m, n);\n//   dest[m*n-1] = 0;\n//   return dest;\n// }\nimport { useState } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst M = 5;\nconst N = function createDest(m, n) {\n  let dest = Array.from({\n    length: m\n  }, (_, i) => Array.from({\n    length: n\n  }, (_, j) => i * n + j + 1));\n  dest[m - 1][n - 1] = 0;\n  return dest;\n};\n_c = N;\nfunction shuffle(m, n) {\n  let shuffled = Array.from({\n    length: m * n\n  }, (_, i) => i);\n  for (let i = shuffled.length - 1; i > 0; i--) {\n    const j = Math.floor(Math.random() * (i + 1));\n    [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];\n  }\n  return Array.from({\n    length: m\n  }, (_, i) => shuffled.slice(i * n, (i + 1) * n));\n}\nfunction heuristic(dest) {\n  const m = dest.length;\n  const n = dest[0].length;\n  const locs = Array.from({\n    length: m * n\n  }, () => [0, 0]);\n  for (let i = 0; i < m; i++) {\n    for (let j = 0; j < n; j++) {\n      locs[dest[i][j]] = [i, j];\n    }\n  }\n  function manhattans(puzzle) {\n    let distance = 0;\n    for (let i = 0; i < m; i++) {\n      for (let j = 0; j < n; j++) {\n        const [x, y] = locs[puzzle[i][j]];\n        const manhattan = Math.abs(x - i) + Math.abs(y - j);\n        distance += manhattan;\n      }\n    }\n    return distance;\n  }\n  return manhattans;\n}\nfunction locateZero(puzzle) {\n  for (let i = 0; i < puzzle.length; i++) {\n    for (let j = 0; j < puzzle[0].length; j++) {\n      if (puzzle[i][j] === 0) {\n        return [i, j];\n      }\n    }\n  }\n}\nfunction neighbors(status) {\n  const puzzle = status.map(row => row.slice());\n  const [i, j] = locateZero(puzzle);\n  const neis = [[1, 0], [-1, 0], [0, 1], [0, -1]];\n  const validNeighbors = [];\n  for (const [di, dj] of neis) {\n    const x = i + di;\n    const y = j + dj;\n    if (x >= 0 && x < puzzle.length && y >= 0 && y < puzzle[0].length) {\n      [puzzle[i][j], puzzle[x][y]] = [puzzle[x][y], puzzle[i][j]];\n      validNeighbors.push(puzzle.map(row => row.slice()));\n      [puzzle[i][j], puzzle[x][y]] = [puzzle[x][y], puzzle[i][j]];\n    }\n  }\n  return validNeighbors;\n}\nfunction traceToDest(visited, dest) {\n  const path = [dest];\n  while (visited[dest]) {\n    const pre = visited[dest];\n    path.push(pre);\n    dest = pre;\n  }\n  return path.reverse();\n}\nfunction astar(puzzle, dest) {\n  const manhattans = heuristic(dest);\n  const start = puzzle.map(row => row.slice());\n  const target = dest.map(row => row.slice());\n  const startTuple = start.map(row => row.slice());\n  const heap = [[manhattans(start), 0, startTuple]];\n  const visited = {};\n  visited[JSON.stringify(start)] = null;\n  while (heap.length > 0) {\n    const [evaluate, depth, status] = heap.shift();\n    if (JSON.stringify(status) === JSON.stringify(target)) {\n      break;\n    }\n    for (const nei of neighbors(status)) {\n      const strNei = JSON.stringify(nei);\n      if (!visited[strNei]) {\n        visited[strNei] = status;\n        heap.push([depth + 1 + manhattans(nei), depth + 1, nei]);\n      }\n    }\n    heap.sort((a, b) => a[0] - b[0]);\n  }\n  if (!visited[JSON.stringify(target)]) {\n    console.log(\"invalid puzzle\");\n    return null;\n  }\n  const path = traceToDest(visited, JSON.stringify(target));\n  return path.map(step => step.map(row => row.slice()));\n}\nfunction Square({\n  value,\n  onClick\n}) {\n  return /*#__PURE__*/_jsxDEV(\"button\", {\n    className: \"square\",\n    onClick: onClick,\n    children: value\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 126,\n    columnNumber: 5\n  }, this);\n}\n_c2 = Square;\nexport default function Board() {\n  _s();\n  const [squares, setSquares] = useState(shuffle(M, N));\n}\n_s(Board, \"ZdllxoxyMcFfDZlqaHxs4F6FOIU=\");\n_c3 = Board;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"N\");\n$RefreshReg$(_c2, \"Square\");\n$RefreshReg$(_c3, \"Board\");","map":{"version":3,"names":["useState","jsxDEV","_jsxDEV","M","N","createDest","m","n","dest","Array","from","length","_","i","j","_c","shuffle","shuffled","Math","floor","random","slice","heuristic","locs","manhattans","puzzle","distance","x","y","manhattan","abs","locateZero","neighbors","status","map","row","neis","validNeighbors","di","dj","push","traceToDest","visited","path","pre","reverse","astar","start","target","startTuple","heap","JSON","stringify","evaluate","depth","shift","nei","strNei","sort","a","b","console","log","step","Square","value","onClick","className","children","fileName","_jsxFileName","lineNumber","columnNumber","_c2","Board","_s","squares","setSquares","_c3","$RefreshReg$"],"sources":["/home/zpc/Code/MyProjects/Maze/src/App.js"],"sourcesContent":["// function reshape(array, m, n) {\n\n// }\n\n// function create_dest(m, n) {\n//   let dest = Array(m*n).fill(null).map((_, i) => i+1);\n//   dest = reshape(dest, m, n);\n//   dest[m*n-1] = 0;\n//   return dest;\n// }\nimport { useState } from \"react\";\nconst M = 5;\nconst N = \n\n\nfunction createDest(m, n) {\n  let dest = Array.from({ length: m }, (_, i) => Array.from({ length: n }, (_, j) => i * n + j + 1));\n  dest[m - 1][n - 1] = 0;\n  return dest;\n}\n\nfunction shuffle(m, n) {\n  let shuffled = Array.from({ length: m * n }, (_, i) => i);\n  for (let i = shuffled.length - 1; i > 0; i--) {\n      const j = Math.floor(Math.random() * (i + 1));\n      [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];\n  }\n  return Array.from({ length: m }, (_, i) => shuffled.slice(i * n, (i + 1) * n));\n}\n\nfunction heuristic(dest) {\n  const m = dest.length;\n  const n = dest[0].length;\n  const locs = Array.from({ length: m * n }, () => [0, 0]);\n  for (let i = 0; i < m; i++) {\n      for (let j = 0; j < n; j++) {\n          locs[dest[i][j]] = [i, j];\n      }\n  }\n  function manhattans(puzzle) {\n      let distance = 0;\n      for (let i = 0; i < m; i++) {\n          for (let j = 0; j < n; j++) {\n              const [x, y] = locs[puzzle[i][j]];\n              const manhattan = Math.abs(x - i) + Math.abs(y - j);\n              distance += manhattan;\n          }\n      }\n      return distance;\n  }\n  return manhattans;\n}\n\nfunction locateZero(puzzle) {\n  for (let i = 0; i < puzzle.length; i++) {\n      for (let j = 0; j < puzzle[0].length; j++) {\n          if (puzzle[i][j] === 0) {\n              return [i, j];\n          }\n      }\n  }\n}\n\nfunction neighbors(status) {\n  const puzzle = status.map(row => row.slice());\n  const [i, j] = locateZero(puzzle);\n  const neis = [[1, 0], [-1, 0], [0, 1], [0, -1]];\n  const validNeighbors = [];\n  for (const [di, dj] of neis) {\n      const x = i + di;\n      const y = j + dj;\n      if (x >= 0 && x < puzzle.length && y >= 0 && y < puzzle[0].length) {\n          [puzzle[i][j], puzzle[x][y]] = [puzzle[x][y], puzzle[i][j]];\n          validNeighbors.push(puzzle.map(row => row.slice()));\n          [puzzle[i][j], puzzle[x][y]] = [puzzle[x][y], puzzle[i][j]];\n      }\n  }\n  return validNeighbors;\n}\n\nfunction traceToDest(visited, dest) {\n  const path = [dest];\n  while (visited[dest]) {\n      const pre = visited[dest];\n      path.push(pre);\n      dest = pre;\n  }\n  return path.reverse();\n}\n\nfunction astar(puzzle, dest) {\n  const manhattans = heuristic(dest);\n  const start = puzzle.map(row => row.slice());\n  const target = dest.map(row => row.slice());\n  const startTuple = start.map(row => row.slice());\n  const heap = [[manhattans(start), 0, startTuple]];\n  const visited = {};\n  visited[JSON.stringify(start)] = null;\n\n  while (heap.length > 0) {\n      const [evaluate, depth, status] = heap.shift();\n      if (JSON.stringify(status) === JSON.stringify(target)) {\n          break;\n      }\n      for (const nei of neighbors(status)) {\n          const strNei = JSON.stringify(nei);\n          if (!visited[strNei]) {\n              visited[strNei] = status;\n              heap.push([depth + 1 + manhattans(nei), depth + 1, nei]);\n          }\n      }\n      heap.sort((a, b) => a[0] - b[0]);\n  }\n\n  if (!visited[JSON.stringify(target)]) {\n      console.log(\"invalid puzzle\");\n      return null;\n  }\n\n  const path = traceToDest(visited, JSON.stringify(target));\n  return path.map(step => step.map(row => row.slice()));\n}\n\nfunction Square({value, onClick}) {\n  return (\n    <button className=\"square\" onClick={onClick}>\n      {value}\n    </button>\n  );\n}\n\nexport default function Board() {\n  const [squares, setSquares] = useState(shuffle(M, N));\n\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}